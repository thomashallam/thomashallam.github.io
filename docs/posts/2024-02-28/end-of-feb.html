<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.543">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tom Hallam">
<meta name="dcterms.date" content="2024-02-28">

<title>User Research, User-Centred Design, User Experience - Monthnotes: Spring Cleaning and BAU</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-EMB22EEKPF"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-EMB22EEKPF', { 'anonymize_ip': false});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">User Research, User-Centred Design, User Experience</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Tom’s blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Hello</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources/links.html"> 
<span class="menu-text">Useful links</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects/projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/thomashallam"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/thomashallam"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/thomashallam"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Monthnotes: Spring Cleaning and BAU</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Monthnotes</div>
    <div class="quarto-category">Personal</div>
    <div class="quarto-category">Wellbeing</div>
    <div class="quarto-category">Hospital</div>
    <div class="quarto-category">Research Operations</div>
    <div class="quarto-category">Community</div>
    <div class="quarto-category">Data</div>
    <div class="quarto-category">Culture Change</div>
    <div class="quarto-category">Knowledge Management</div>
    <div class="quarto-category">Leadership</div>
    <div class="quarto-category">Ways of Working</div>
    <div class="quarto-category">Information Governance</div>
    <div class="quarto-category">AI</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Tom Hallam </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 28, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="outside-of-work" class="level2">
<h2 class="anchored" data-anchor-id="outside-of-work">Outside of work</h2>
<p>I had the opportunity to conduct some unplanned fieldwork this week, and made a few observations around frontline services…</p>
<p>Late on Sunday I felt unwell, I tried the new NHS App-&gt;111-&gt; Patches triage journey.</p>
<p>This resulted in me leaving a short message. To my massive surprise, there was a reply in the morning saying to book an urgent appointment!</p>
<p>Monday 8am, 35 callers were on hold for GP, I gave up and went to work.</p>
<p>Tuesday, 42 callers were on hold for GP at 8am. I stayed on and it took 30 minutes to get through.</p>
<p>Had a same day appt.</p>
<p>Also had a few tests, queues are 10 deep at the bloods service daily (before they even open)</p>
<p>Will need a follow up, and no GP bookable appointments for next 3 weeks.</p>
<p>In a separate but more urgent incidient, my child had a head injury at school, got was sent home vomitting…</p>
<p>I called 999 for the first time in my life.</p>
<p>I was very surprised to learn 999 only provide ambulances, not clinical advice… I could have an ambulance or nothing. The dispatcher couldn’t advise on what to do. I felt it better to drive to A&amp;E as precaution anyway.</p>
<p>(Note I skipped calling 111 becuase on previous calls the clinical callback took multiple hours)</p>
<p>Also learned the local walk-in clinic is still not dealing with head injuries. After my head injury last year.</p>
<p>A&amp;E well… as anticipated yes they were busy… but yet their staff were very empathetic and patient in their ways of working.</p>
<p>This week was a bleak reminder, how things are mostly always stretched in the NHS. And this was before the strike started. I imagine the cadence rarely drops for our frontline colleagues.</p>
<p>Also doctors don’t have giant thumbs as depicted in the pharm first campaign!</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="pharm-first.jpg" class="external figure-img" alt="Patient with giant iPad and giant thumb is triaged by an unhappy doctor or pharmacist. Presumbably ai generated, perhaps not?!" height="475"></p>
<figcaption>Sceenshot of the NHSE Pharmacy First Campaign</figcaption>
</figure>
</div>
</section>
<section id="back-at-work" class="level2">
<h2 class="anchored" data-anchor-id="back-at-work">Back at work…</h2>
<p>There is a similar story and patterns mirrored in digital teams workloads.</p>
<p>We have the regular deluges of urgent and high priority transformation projects/change requests. These sit atop multiple-years worth of work, for each team.</p>
<p>Constant reprioritisation and backlog churn.</p>
<p>Due to the pressures, many of the less-exciting bits of work are put off, and off, and off.</p>
<p>It is not because they are unimportant, or boring to work on, but business-as-usual (BAU) lacks priority in the minds of sponsors.</p>
</section>
<section id="why-more-focus-is-needed-around-bau" class="level2">
<h2 class="anchored" data-anchor-id="why-more-focus-is-needed-around-bau">Why more focus is needed around BAU?</h2>
<p>It is a tough to sell the message ‘we will deliver the same, or some better BAU’ to stakeholders.</p>
<p>BAU only grabs attention when things go wrong, which they did recently on one project…</p>
<p>I jumped into leading solving the problem “a crisis is a terribly thing to waste…”</p>
<p>Lack of BAU causes incidents, and contagious disruption across teams… to fix incidents many loose ends… often scabs… painfully need unpicking.</p>
<p>Root cause analysis, a bit of detective work… who, what, where, why, when, how… did this XYZ happen?</p>
</section>
<section id="some-farewells" class="level2">
<h2 class="anchored" data-anchor-id="some-farewells">Some farewells</h2>
<p>This week, the Covid Testing Team have shut their doors after nearly 4 years.</p>
<p>I said another bye to great colleagues who have delivered what could easily be describe as “the worlds longest design sprint / alpha”.</p>
<p>These services were constantly being reimagined over three long years, until in late 2023 things finally went into ‘bau’ awaiting the end of the pandemic (or reemergence where everything might need unboxing…)</p>
<p>This ending was a chance to innvoate, and try out a third-party API to support archiving a very large block of data. A day of <a href="https://github.com/thomashallam/Qualtrics-api">writing and testing code</a>, it worked well enough and saved myself and colleagues many weeks of manual effort extracting data and archiving data.</p>
</section>
<section id="the-problem-with-offboarding-as-bau" class="level2">
<h2 class="anchored" data-anchor-id="the-problem-with-offboarding-as-bau">The problem with offboarding as BAU</h2>
<p>One chronic neglected BAU area is “offboarding”. When people leave or teams shut down, things need archiving…</p>
<p>Every time someone who has been here more than six months leaves we need to ensure we have wrapped up things appropriately.</p>
<p>For example, have they updated, saved, archived or handed over all their:</p>
<ul>
<li><p>Projects, artefacts, documentation, reports, templates, etc.</p></li>
<li><p>Surveys, usability tests, etc, etc.</p></li>
<li><p>User panels, panel network contacts, stakeholder maps,</p></li>
<li><p>Research data (videos, transcripts, etc),</p></li>
<li><p>Software licenses, user accounts, returned equipment, etc</p></li>
</ul>
<p>Central resources such as staff lists to be refreshed every time someone leaves!</p>
<p>And if someone was the key contact for anything… well guidelines / policies and operating procedures may need refreshing, as well delegating to new owners.</p>
<p>My favourite quote about this topic, which relates back to knowledge management workstream:</p>
<p><em>“There is no content fairy that comes out at night and cleans up all your mess” Caroline Jarrett</em></p>
<p>And this is the problem, we need more ‘content fairies’ and bau/ops capacity.</p>
<p>Ironically, ops and project staff are the roles that are not in our new operating model… we do have our hopes pinned on future tech / ai however.</p>
<p>Much more on AI in a follow-up post soon, but in short we are many, many years off even basic automation of processes for the NHS workforce, let alone anything with the signs of “intelligence”.</p>
</section>
<section id="who-is-who-bau" class="level2">
<h2 class="anchored" data-anchor-id="who-is-who-bau">Who is who, BAU?</h2>
<p>After the merger, we are now a much bigger organisation, with hundreds of researchers and designers, with contractors and suppliers are joining and leaving on a regular basis.</p>
<p>It has got to a point where it is really difficult to say definitely, who <em>actually</em> works here? And what are they working on?</p>
<p>Knowing who works for us, onboarding and offboarding successfully, underpins almost everything our teams do. Capacity, planning, quality, delivery.</p>
<p>It is huge amount of side-of-desk bau work for multiple functions (HR, Tech, Ops, PMO, Finance, Professions, etc.)</p>
<p>My assumption is this is a classic <em>fallacy of the commons</em> - everyone thinks everyone else is responsible for it, or everyone is just about happy enough with how it is to not complain becuase, they don’t want responsibility for it, aka “you touched it last”.</p>
<p>We really need to tackle structural operating issues. Hospitals don’t have consultant staff floating around for months? Staff have defined roles, reporting lines and responsibilities, right?</p>
<p>And there really is nothing more embarrassing than when colleagues come asking for support, or to approve something, and you have no way to check if they are curren staff, permanent or contractor.</p>
<p>It appears no one owns onboarding and offboarding at a strategic level. We have exciting visions and strategies based on outcomes, such as the “UCD + Product + Engineering Centres of Expertise”, but where is the operational plan?</p>
<p>We have teams delivering great UCD work in siloes, but connecting, collaborating and upskilling horizontally is an enormous challenge too. There is a huge friction/debate about how we work and hybrid/office working - lets not get into that.</p>
<p>We really must get much better at operational planning, BAU and horizontal change.</p>
<p>One might say we need more staff, or to distribute ownership of all BAU work around the business, or even ask AI to do it for us (hint: ai is not going to solve many of our problems)!</p>
<p>Have a good weekend!</p>
<p>Tom</p>
<p>TL;DR</p>
<p>January and February have been exceptionally busy, at work, outside… the weather… diy.. health.. everything. I should have stuck to writing shorter things and running more reguarly. But in first week of January week, events happened and most of my plans went out the window.</p>
<p>It has been so busy with requests it feels like there has been constant popcorn popping going off in my head. I haven’t slept well recently, and I’ve disabled my slack and email notifications. If you need something urgently, please read the docs first, I’m requesting people book a short call in for the next day - not same day calls.</p>
<p>I know lots of colleagues have been struggling with the re-org too, lots of additional work to pick-up. Hopefully this picture will get better as new joiners from the recent recruitment campaigns join.</p>
<p>While I’m writing this update, it did make sense to me, hopefully it made sense to any readers too!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>