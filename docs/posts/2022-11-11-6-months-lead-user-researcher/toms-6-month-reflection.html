<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tom Hallam">
<meta name="dcterms.date" content="2022-11-11">

<title>User Research, User-Centred Design, User Experience - 6 months into Lead UR Role</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-EMB22EEKPF"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-EMB22EEKPF', { 'anonymize_ip': false});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">User Research, User-Centred Design, User Experience</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Tom’s blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Hello</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources/links.html"> 
<span class="menu-text">Useful links</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects/projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/thomashallam"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/thomashallam"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/thomashallam"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">6 months into Lead UR Role</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">CI</div>
                <div class="quarto-category">UCD Maturity</div>
                <div class="quarto-category">Knowledge Management</div>
                <div class="quarto-category">Surveys</div>
                <div class="quarto-category">Research Lab</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Tom Hallam </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 11, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><strong>TL;DR</strong> This post covers my reflections 6-months into the new UCD-Lead / Lead User Researcher role</p>
<p>I love continuous development… I really hate formal reviews! However it has been a hectic time so reflecting on the challenges and my progress over the last 6 months is hopefully helpful, not least to unpick some challenges and things I might do differently going forward too.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="jungwoo-hong-cYUMaCqMYvI-unsplash.jpg" class="img-fluid figure-img"></p>
<figcaption>Image: <a href="https://unsplash.com/photos/cYUMaCqMYvI" class="external" target="_blank">Jungwoo</a></figcaption>
</figure>
</div>
<hr>
<section id="thoughts-about-the-new-role" class="level2">
<h2 class="anchored" data-anchor-id="thoughts-about-the-new-role">Thoughts about the new role</h2>
<p>This role and the projects have been <em>much</em> more complex than I expected!</p>
<p><strong>Positives:</strong></p>
<ul>
<li>It was a considerable change for me - after 12 years work on ‘frontline research’, to move into a more strategic role focussed on capability development</li>
<li>I’ve learnt loads about how things work from an ‘organisational perspective’, rather than ‘what happens from the delivery teams perspective’</li>
<li>The Central UCD Teams are really brilliant, great personalities, brilliant experience and have diverse perspectives</li>
<li>Finding some greenfields to work in: starting projects from scratch, defining the goals and timelines</li>
<li>Working with the team and UR Leadership community to shape and prioritise our roadmap</li>
<li>The focus is on quality and outcomes rather speed/quantity</li>
<li>Interesting player/coach mix - leading discovery and alphas vs.&nbsp;UCD Maturity coaching</li>
<li>The support and guidance available from colleagues in the team, as well as new training opportunities</li>
<li>Found time to contiune to support DHSC as an UR Service Assessor</li>
<li>Working on technically complex projects, and working with lots of teams and stakeholders</li>
<li>It’s not been quite as stressful as Covid Testing, projects are given the time they need</li>
</ul>
<p><strong>Challenges:</strong></p>
<ul>
<li>Coordinating change across disporate groups and teams can take a lot of time. E.g. to understand their needs and taking them on a journey: reflection, alignment, action planning, delivery, etc. It can easily take 3-6 months before change and positive outcomes happen on these workstreams.</li>
<li>So many project - taking on too much……. stemming the tide of requests. Needing to practice better prioritisation and saying no to more requests! Finding ways to automate things!</li>
<li>Choosing which battles to fight has never been more important, defining clear roles and responsibilities (e.g.&nbsp;local UR leads should do this bit, or the central team will do that)</li>
<li>Being dropped into a politically complex NHS programme ‘100-day discharge challenge’. Due to delays in starting the work there was no time for actual discovery. Saved the project by running a complex follow-up survey with Qualtrics for 150 Trusts/CCIOs. It worked out well for the project but was very stressful, and it didn’t provide much benefit for the Central UCD Team or UR community</li>
<li>Feeling a bit disconnected from frontline… turning this around to believe (and demonstrate) how what we do in the Central UCD Team for the professions and organisational strategy has a direct impact on patient care. “Better capability, better delivery, better outcomes”</li>
<li>Going from having a large team of contractors to manage, into having no direct reports. I.e. there are no ‘juniors URs or URs to delegated directly to’ - everything must be done through leadership, influencing, pursuasion of the community and colleagues!</li>
</ul>
<hr>
</section>
<section id="projects" class="level2">
<h2 class="anchored" data-anchor-id="projects">Projects</h2>
<section id="ucd-maturity" class="level3">
<h3 class="anchored" data-anchor-id="ucd-maturity">UCD Maturity</h3>
<p><strong>I’ve hosted the UCD Maturity Community of Practice (which enables peer-support between teams), chaired UCD Maturity workshops, and provided UCD-coaching and guidance to teams as required.</strong></p>
<p><em>Challenges:</em></p>
<p>This project was really difficult to get started. Picking up work that hasn’t been looked at for several months since the agency who created the maturity model rolled-off. A few teams had done workshops to test the UCD model, but this was 6-months before I joined!</p>
<p>Since joining the team, I faciltated meetings of the Community of Practice (CoP) every 3 weeks. We started with some reflection activities to learn about what colleagues wanted to get out this community, and create a shared agenda from their.</p>
<p>The CoP identified lots of challenges/blockers to rolling out UCD-Maturity workshops to all teams:</p>
<ul>
<li>It’s difficult to build engagement across ‘non-delivery’ teams</li>
<li>Lots of teams are still sceptical: what is UCD about? what benefits? a 3 hours workshop?</li>
<li>Teams unavailbility: summer holiday, mourning of the Queen, challenging delivery schedules</li>
<li>Competing agendas: product maturity/product mindsets, engineering maturity, etc.</li>
<li>Organisational merger / team restructures</li>
</ul>
<p><strong>The Community of Practice, and UCD Maturity Faciltators are great! very supportive of each other!</strong></p>
<p>One push-back we get is there is a risk we are preaching to the converted. UCD maturity reviews are not mandated, so some teams are many miles off the UCD-grid, and are not volunteering up to being involved at all. To scale things up we do need more consistent encouragement from senior programme managers/directors as well as champions/practitioners within teams to offer up the idea of doing a workshop.</p>
<p>Also to get these teams onboard we need to provide stronger evidence for how UCD Maturity workshops benefit teams. So we aim to run an evaluation study/survey with all the teams/colleagues who took part to understand the benefits.</p>
<p><strong>Positives:</strong></p>
<ul>
<li>UCD Maturity Community of Practice growing, including interest from outside UCD</li>
<li>UCD Maturity Training - attended by 15 colleagues</li>
<li>Workshops - we’ve run workshops with 5 teams since I joined</li>
<li>1 face-to-face workshop has been planned</li>
<li>Interest from external teams, NHS organisations and consultancies</li>
<li>5 more teams are planning workshops</li>
<li>Positive feedback from the 3 most recent workshops!</li>
<li>Teams who work on Data/APIs commenting “Good to see how UCD can apply to their work too!”</li>
<li>2 teams who took part recently, being very proactive and creating the action plan without any support</li>
</ul>
<hr>
</section>
<section id="acting-as-an-sme-for-ucdur-within-the-central-ops-team" class="level3">
<h3 class="anchored" data-anchor-id="acting-as-an-sme-for-ucdur-within-the-central-ops-team">Acting as an SME for UCD/UR within the Central Ops team</h3>
<p><em><a href="../..\posts/2022-11-18-weeknotes/nhsd-ur-lab-launch.html">I’ve helped launch the UR Lab!</a></em></p>
<p><strong>Qualtrics (expert user and IG lead)</strong></p>
<p>As the IAA “Information Asset Assistant” Things that i’ve been working on:</p>
<ul>
<li>Reviewing the IG protocols and enhancing these to meet the needs</li>
<li>Resolving technical issues that teams have that cannot be resolved within the team</li>
<li>Interfacing with software supplier and customer support</li>
<li>Resolving issues regarding IG/Cyber, with Enquires team and corporate teams</li>
<li>Fixing problems with really complex surveys and contact databases</li>
<li>Training, coaching and a shoulder to cry on for survey makers</li>
<li>Working with Qualtrics team to improve support for our researchers</li>
</ul>
<p><strong>Incentives</strong></p>
<ul>
<li>I’ve supported the rollout of the new incentives portal</li>
<li>I’ve lobbied for the needs of UR community, to be represented in incentives policy, getting finance directors to approve policy changes</li>
<li>I’m Lobbying for NHSD UR community at the X-gov ALB Payments Committee meetups</li>
<li>I’ve drafted new policy on incentives for healthcare staff (non-citizen research), which is being piloted</li>
</ul>
<hr>
</section>
<section id="knowledge-management" class="level3">
<h3 class="anchored" data-anchor-id="knowledge-management">Knowledge management</h3>
<p>This project has been much more complex than I expected</p>
<blockquote class="blockquote">
<p><em>It’s hard to put a price on the value of knowledge and documentation right?</em></p>
</blockquote>
<blockquote class="blockquote">
<p>“Why spend any effort writing processes for UCD? when you could instead hire someone else to write some code for a health service?”</p>
</blockquote>
<blockquote class="blockquote">
<p>“How do we know that standard procedures are useful? Our teams survived for the last decade year without a ‘playbook’”</p>
</blockquote>
<p>These are interesting perspectives, and I guess there are a few benefits to having a low-documentation culture, it encourages creativity!!</p>
<p>I’m sure across the business have over:</p>
<ul>
<li>100 ways to create a research consent form,</li>
<li>100 different persona designs,</li>
<li>100 survey variations,</li>
<li>100 research plans,</li>
<li>100 show and tells decks.</li>
</ul>
<p><strong>ALL DIFFERENT!</strong></p>
<p>IG processes are not consistent across teams, and without any standardisation/or ‘good practice guidance’ the quality and success of UCD across teams has become massively variable (good and bad)!</p>
<p>Some teams do improve what they are doing gradually over time but it can take many years. For new teams starting from scratch with no healthcare or government research experience, it can be very daunting.</p>
<p>Every product team that wants to hire a researcher, and for every contractor that arrives, and every time someone leaves we get the same questions.</p>
<blockquote class="blockquote">
<p>“What do we need to do?” “How do we do this?” “Where is this? I can’t find that?” “How did we do this last time?” “Is there a template?” “Who knows what projects are happening?” “Has this work been done before?” “Where are those previous insights?” “What do we put things when we leave?”</p>
</blockquote>
<p>As I joined the team in May, we didn’t have any Standard Operating Procedures/templates for research delivery; so it is a very long road to turn this around!</p>
<p>With the pandemic forcing everyone to remote work, we’ve been going through a fair bit of creative destruction with teams throwing out their old ways of doing things and finding new solutions.</p>
<p>However, as things with Covid calmed down, more teams are getting back into the offices to gain the benefits of face-to-face collaboration. There are increased opportunities for cross-team information sharing.</p>
<p><strong>Work on knowledge management completed:</strong></p>
<p><em>Before I joined the team:</em></p>
<ul>
<li>Discovery completed</li>
<li>Gap analysis of guidance content completed</li>
<li>Prioritised 4 areas of focus (ethics, safeguarding, consent, IG)</li>
</ul>
<p><em>After I joined the team:</em></p>
<ul>
<li>Expanded scope of priority documentation (UR lab, research panels, UCD, discovery, alpha, surveys)</li>
<li>Improved structure and usability of the Sharepoint sites/sub-sites</li>
<li>Proposed and piloted a new information architecture</li>
<li>Started collecting examples of documentation off teams</li>
<li>Created and shared new guidance based around researchers needs (e.g.&nbsp;staff incentives policy, f2f research policy)</li>
</ul>
<p>This project is a long-haul and as a team we’re chipping away at guidance and documentation. It takes some perservance. We’re continuing on a slow path towards documenting our UR/UCD procedures ahead of the merger with NHSE/HEE in 2023. It is going to be really important for scaling UR/UCD in an organisation with low UCD awareness.</p>
<p>It has also been great hearing positive feedback from UR colleagues and external Re-Ops colleagues about how impressed they are with the guidance and onboarding materials available for NHS Digital UCD colleagues.</p>
<hr>
</section>
<section id="panel-management-strategy" class="level3">
<h3 class="anchored" data-anchor-id="panel-management-strategy"><strong>Panel Management strategy</strong></h3>
<ul>
<li>Discovery - done</li>
<li>Alpha - done</li>
<li>Private beta - happening now</li>
</ul>
<p>I’ve previously written and presented about this project I’m leading to consolidate the many research panels we have into a single NHS Staff panel, with the benefit being a consistent data collection, standard IG processes and communications.</p>
<p>It has been an enjoyable project, with dozens of teams engaging in the discovery and design workshops I facilitated during alpha.</p>
<p>After some gnarly technical problems, which we needed to engage the Qualtrics XM community to resolve, we are now ready to roll out on the panel to internal teams!</p>
<p>Assuming the private beta goes well we’ll advertise the panel more widely and launch it properly for all the researchers later this year. I wrote a blog post about this work, but gave in when comms told me they already had 15 teams lined up to write a post.</p>
<p>Regarding the work on a ‘Citizen Panel for Health’, which would bring together the many citizen contact lists that have grown across teams, unfortunately this has had to be paused due to re-prioritisation of the backlog.</p>
<p>There is some interesting work still happening in this space with the UKHSA Insights team and we are waiting to see how their project goes over the next few months before starting on what would we be a very similar project.</p>
<hr>
</section>
<section id="my-goals-for-next-few-months" class="level3">
<h3 class="anchored" data-anchor-id="my-goals-for-next-few-months"><strong>My goals for next few months</strong></h3>
<ul>
<li>Rolling out the Staff Panel and UR Lab</li>
<li>Try to get the blog post published about the panels work</li>
<li>Keep positive about the UCD Maturity work. It was difficult to start but now has some momentum!</li>
<li>Say no to more requests! Backlog is <em>fully</em> booked up till Jan/Feb</li>
<li>Speed up our knowledge management / BAU process for guidance and SOPs/templates</li>
<li>Complete the Anti-Racism Allies training &amp; Diamond Power Index 360 review</li>
<li>Keep positive, in consideration of the organisation merger</li>
<li>Get back into winter trail running (frosty toes running rather than frosty toes sitting at home!</li>
<li>Take a good break over New Year</li>
</ul>
<p><br></p>
<hr>
</section>
<section id="continue-this-discussion-on-github" class="level3">
<h3 class="anchored" data-anchor-id="continue-this-discussion-on-github">Continue this discussion on GitHub</h3>
<script src="https://giscus.app/client.js" data-repo="thomashallam/thomashallam.github.io" data-repo-id="R_kgDOIW_M2g" data-category="General" data-category-id="DIC_kwDOIW_M2s4CSpZr" data-mapping="url" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="dark_protanopia" data-lang="en" data-loading="lazy" crossorigin="anonymous" async="">
</script>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>