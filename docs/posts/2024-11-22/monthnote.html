<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.543">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tom Hallam">
<meta name="dcterms.date" content="2024-12-09">

<title>User Research, User-Centred Design, User Experience - Monthnotes Nov</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-EMB22EEKPF"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-EMB22EEKPF', { 'anonymize_ip': false});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  


<link rel="stylesheet" href="../../styles.css">
<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">User Research, User-Centred Design, User Experience</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Tom’s blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Hello</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources/links.html"> 
<span class="menu-text">Useful links</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects/projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/thomashallam"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/thomashallam"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/thomashallam"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Monthnotes Nov</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Monthnotes</div>
    <div class="quarto-category">Research Operations</div>
    <div class="quarto-category">Incentives</div>
    <div class="quarto-category">Tools</div>
    <div class="quarto-category">User Needs</div>
    <div class="quarto-category">Participant Recruitment</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Tom Hallam </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 9, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Really late monthnotes now. I gave up on weeknotes - it is just not feasible with all the stuff spinning in my life right now.</p>
<p>It has been a really challenging month outside work. The recent loss of a much-loved family member aged 96… family has been on my mind mostly.</p>
<p>I made a few abrupt decisions in my personal life; maybe I didn’t have the headspace to think about the consequences, mental health, physical health always a fine balancing act…</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="sigmund-B-x4VaIriRc-unsplash.jpg" class="img-fluid figure-img"></p>
<figcaption><a href="https://unsplash.com/photos/brown-and-black-jigsaw-puzzle-B-x4VaIriRc">Jigsaw Photo on Unsplash</a></figcaption>
</figure>
</div>
<section id="month-review" class="level1">
<h1>6 month review</h1>
<p>It is now six months since setting my annual objectives - here is a briefdown of how things are going.</p>
<section id="what-is-going-well" class="level2">
<h2 class="anchored" data-anchor-id="what-is-going-well">What is going well</h2>
<section id="making-the-work-of-the-team-more-visible" class="level3">
<h3 class="anchored" data-anchor-id="making-the-work-of-the-team-more-visible">Making the work of the team more visible</h3>
<p>I ensured that transparency and adoption of the standard toolset were prioritised by the team</p>
<ul>
<li><p>I supported the team to migrate away from Trello to Jira, which is now used by all the Central UCD team staff, alongside the Service Manual backlog. We have much better data on the amount of work coming into the team and how long requests take to resolve</p></li>
<li><p>I empowered UCD colleagues to work on shared initiatives, supporting them to raise their in the backlog, also assigning/delegating projects and tasks for colleagues to lead on as appropriate</p></li>
<li><p>The team completed our Objectives and Key Results (OKRs) session, as well as a Values and Principles session, agreeing the scope of work and priorities within our team. To escalate to senior staff the vast array of work that is dependent on a small team.</p></li>
<li><p>I worked with our product manager and delivery manager to ensure the backlog and roadmap were up to date, with new OKRs (objectives-key-results) and these are reflected openly on Jira.</p></li>
<li><p>I presented our UCD Ops approach to external several departments including (NICE, UKHSA, DHSC) as well as internal teams, at our user research and design community.</p></li>
</ul>
</section>
<section id="leading-the-ucd-centre-of-expertise-coe" class="level3">
<h3 class="anchored" data-anchor-id="leading-the-ucd-centre-of-expertise-coe">Leading the UCD Centre of Expertise (COE)</h3>
<p>I chaired the weekly Knowledge Management meetings, with support from colleagues, during the last six months.</p>
<p>The weekly sessions alternate between reviewing content planned for publication on the UCD CoE Sharepoint and stand-ups (where colleagues share how the various workstreams are progressing).</p>
<p>I assigned key work and projects to Leads / Seniors across various team</p>
<p>Sharing UCD-profession/COE workload has been going well, with more new joiners (Seniors and Leads) in the UR and design community it has been more possible to distribute workload across teams.</p>
<p>As we now have many new initiatives in progress, our team has stepped-back from delivery of many projects.</p>
<p><strong>UCD colleagues are leading the following initiatives:</strong></p>
<ul>
<li>Naomi - running the consent forms working group</li>
<li>Josie - leading on the ID cards for researchers</li>
<li>Kathryn - coordinating the design leadership group for UCD CoE content</li>
<li>David - writing new content for the UCD Sharepoint</li>
<li>Meera and Amy - ethics working groups and ethics support channel</li>
<li>Simon and Hyunjin – leading the safeguarding working group, including creating new resources and running training days</li>
<li>Lisa - leading on the UR Community Networks and physical vouchers</li>
<li>Tony - Re-Ops team has been managing the new Citizen and Staff panels, working closely with IG</li>
<li>Karthik – taking on a project to stndardise UR planning templates</li>
<li>And many more…</li>
</ul>
</section>
<section id="engaging-the-design-community" class="level3">
<h3 class="anchored" data-anchor-id="engaging-the-design-community">Engaging the design community</h3>
<p>I completed a discovery to understand and support broader needs of design community. I facilitated multiple workshops with designers across NHSE to encourage them to support the Knowledge Management working group.</p>
<p>This included an open feedback sessions to hear about the challenges designers had, what content they needed on the UCD Sharepoint, as well understanding where they seek guidance currently. This led to conducting a card sort, to understand the themes within the content that designers require, as well proposing a new information architecture (IA) for the design part of the UCD CoE.</p>
<p>The new IA was reviewed by multiple teams, including the Service Manual team, Heads of Profession, and SLT, to seek support for the initiative and to agree the scope and priorities.</p>
<p>I set up an environment with the proposed content themes for colleagues to prioritise and agree who would work on the first draft. The new backlog was handed over to the Design Leadership to progress, with an understanding that content would be reviewed before final publication.</p>
</section>
<section id="joining-up-teams-on-strategic-challenges" class="level3">
<h3 class="anchored" data-anchor-id="joining-up-teams-on-strategic-challenges">Joining up teams on strategic challenges</h3>
<p>I helped improve the visibility of work across teams, by rolling out the adoption of User Research staff database for all UCD roles.</p>
<p>The UCD database now has 360 staff (across all team and roles), the database is adopted (more or less) by all teams. Expanding the usage has unblocked many challenges we were having around access to tools.</p>
<p>There are still some challenges to keep things up to date (without any admin colleagues) and there is scope for improving how teams use this, e.g.&nbsp;by linking to other datasources.</p>
</section>
</section>
<section id="drive-progress-on-ucd-tools" class="level2">
<h2 class="anchored" data-anchor-id="drive-progress-on-ucd-tools">Drive progress on UCD Tools</h2>
<section id="user-research-finder-support-next-phase" class="level3">
<h3 class="anchored" data-anchor-id="user-research-finder-support-next-phase">User Research Finder – support next phase:</h3>
<ul>
<li>I supported the Business case / Approvals, to extend ‘the prototype’</li>
<li>I also explored other suppliers / PAAS tools, including MS PowerApps, PowerAutomate, PowerBI, Copilot</li>
<li>I helped encouraging adoption among UR and design community</li>
<li>I presented our UR Finder project to other departments, as well as writing a case study for CDDO (AI Framework)</li>
</ul>
</section>
<section id="ucd-tools" class="level3">
<h3 class="anchored" data-anchor-id="ucd-tools">UCD Tools</h3>
<ul>
<li>Unmoderated testing tool – completed contract renewal</li>
<li>Unmoderated testing tool – SSO migration completed</li>
<li>Prototype Kit hosting – business case is now drafted</li>
<li>Prototyping SaaS tool – team took over management of tool with 600 users, including licenses / billing / working with supplier</li>
<li>Whiteboarding tool – agreed commercial next steps, supported business case</li>
<li>Laptops – completed survey review of need for wider range of specialist devices<br>
</li>
<li>Survey tool – supported Enterprise Apps team to take over contract and account management</li>
</ul>
</section>
<section id="user-research-ur-lab" class="level3">
<h3 class="anchored" data-anchor-id="user-research-ur-lab">User Research (UR) Lab</h3>
<ul>
<li>The lab is now fully self-serviced, with support provided primarily from the UR Lab champions group.</li>
<li>Lab usage has been very good, with hundreds of participants attending teams’ sessions during the last 6 months.</li>
<li>I hosted three UR Lab Champions network, to agree priorities and how to manage teams bookings</li>
<li>I delivered monthly training sessions, with over 50 colleagues attending, as the majority of staff are trained to use the lab, we’ve opened up access so anyone in the research profession can book the lab</li>
<li>I supported the UR Lab artwork, research and design, supplier engagement and installation. Mainly by getting out the way and letting the designers lead the process</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="UR-lab-artwork.png" class="img-fluid figure-img"></p>
<figcaption>UR Lab Artwork</figcaption>
</figure>
</div>
</section>
</section>
</section>
<section id="challenges" class="level1">
<h1>Challenges</h1>
<p>Not much has changed since 6 months ago. The Ops team has shrunk again, and looks like it might shrink again, all while the workload continues to grow.</p>
<section id="ucd-maturity" class="level3">
<h3 class="anchored" data-anchor-id="ucd-maturity">UCD Maturity</h3>
<ul>
<li>There seems to be more interest in the UCD Maturity framework by other departments outside NHS England than internally</li>
<li>Limited capacity – UCD Team had to cancel all strategic work, focus has been on dealing with short-term projects, business cases and crisis management</li>
<li>We need to refresh the framework; it is likely going to be needed in next year to support enabling change towards UCD in historically non-user-centred teams</li>
<li>We need to realign teams around Product, Engineering and UCD Maturity - to ensure UCD has fair representation and is not a third-wheel / after thought</li>
</ul>
</section>
<section id="roles-and-responsibilities" class="level3">
<h3 class="anchored" data-anchor-id="roles-and-responsibilities">Roles and responsibilities</h3>
<ul>
<li>Where are the UR/Design Ops roles / career ladders?</li>
<li>How do we recruit more permanent UCD Ops staff? … all budgets are linked to programmes of work?</li>
<li>Why have all the admin staff been removed from Ops teams?</li>
<li>How do we agree what UCD Leads, Head of UCD, SLT are responsible for?</li>
</ul>
</section>
<section id="onboarding" class="level3">
<h3 class="anchored" data-anchor-id="onboarding">Onboarding</h3>
<ul>
<li>Still massive problem for UCD Team over last two years</li>
<li>Staff requesting things at very short notice, but we don’t have basic info about them, who they are, role, team, when they joined, are they perm or contractorsetc.</li>
<li>It is not clear where Central UCD Team should fit in wider onboarding and offboarding processes</li>
</ul>
</section>
<section id="offboarding" class="level3">
<h3 class="anchored" data-anchor-id="offboarding">Offboarding</h3>
<ul>
<li>We need to understand the offboarding experience of colleagues… massive pain point across multiple teams…</li>
<li>We need to establish new processes across whole of HR / Tech Services / Ops to offboarding</li>
<li>How might we ensure our tools and the data they hold are secure?</li>
</ul>
</section>
<section id="information-governance" class="level3">
<h3 class="anchored" data-anchor-id="information-governance">Information governance</h3>
<ul>
<li>Several new process has been introduced by information governance (IG), it is significantly more time consuming than previous process, with multiple reviews and approvals required</li>
<li>Teams have limited understanding of IG and (Data Privacy Impact Assessments) DPIAs, we hear some teams are not following the right processes</li>
<li>How might NHSE ensure teams have an understanding of IG processes?</li>
</ul>
</section>
<section id="software-business-cases" class="level3">
<h3 class="anchored" data-anchor-id="software-business-cases">Software business cases</h3>
<ul>
<li>Teams are spending vast time creating business cases / getting budgets for critical tools</li>
<li>Typically, dozens of meetings are required, hundreds of emails back and forth - even for basic as-is contract renewals</li>
<li>It seems there is limited appetite to discuss how much internal timeis wasted on approvals</li>
</ul>
</section>
<section id="tech-devices" class="level3">
<h3 class="anchored" data-anchor-id="tech-devices">Tech / Devices</h3>
<ul>
<li>Our survey shoed an evident need for a range of devices across large number of roles</li>
<li>Many colleagues say their Windows laptops are unreliable, however Macbooks are still not supported by Tech Services</li>
</ul>
</section>
<section id="ur-finder" class="level3">
<h3 class="anchored" data-anchor-id="ur-finder">UR Finder</h3>
<ul>
<li>We worked with Microsoft team to recreate workflow for UR Finder, however deployment on NHSE environment delay for several months…</li>
<li>How might we ensure internal approvals happen more quickly?</li>
<li>How might we support staff to attend training in MS tools?</li>
</ul>
</section>
<section id="new-initatives" class="level3">
<h3 class="anchored" data-anchor-id="new-initatives">New initatives</h3>
<ul>
<li>UCD CoE Leads Group. Initially loads of enthusiasm, some great new starters joined, but seems to be lack of shared vision and limited coordination…</li>
<li>Sustainability / NetZero agenda – not seen as a priority by teams, teams don’t have any expertise in this area. No one is talking about this</li>
<li>Standards and assurance - teams are not being assured due to lack of trained assessors and assessor capacity, which is concerning for quality of services being delivered</li>
</ul>
</section>
<section id="priorities" class="level3">
<h3 class="anchored" data-anchor-id="priorities">Priorities</h3>
<ul>
<li>Same as last year; it has been difficult period to understand priorities of our key stakeholders and leadership</li>
<li>Many team have been restructured. Budget changes continue to impact delivery and colleagues morale</li>
<li>Seems there is uncertainty everywhere: many teams being told to pause work or focus on cost-cutting</li>
<li>10 year plan… wait and see… what are teams doing while we wait?</li>
</ul>
<p>Honestly, I wish this second half could have been more positive; the reality is everyone in UCD team has been working at max-capacity and stressed/anxious for many months.</p>
<p>With limited positive news on the horizon around strategy direction, budgets, our empowered multidisciplinary teams, particularly those with a UCD-focus, are leading the way to work through the uncertainty, together driving forward transformation across the NHS.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>